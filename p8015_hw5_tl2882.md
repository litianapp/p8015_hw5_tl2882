p8015\_hw5\_tl2882
================
Tian Li
2018-11-04

Problem 1
=========

Read data
---------

``` r
read_data = function(file){
  read.csv(str_c("./data/", as.character(file)))
}

file_name = list.files("./data")
output = purrr::map_df(file_name, read_data)
```

Tidy data
---------

``` r
data = output %>%
  mutate(input = file_name) %>% 
  separate(input, into = c("arm", "id"), sep = "_") %>% 
  mutate(id = str_replace(id, ".csv", "")) %>% 
  gather(key = "week", value = "value", week_1:week_8) %>% 
  mutate(week = str_replace(week, "week_", ""))

head(data)
```

    ##   arm id week value
    ## 1 con 01    1  0.20
    ## 2 con 02    1  1.13
    ## 3 con 03    1  1.77
    ## 4 con 04    1  1.04
    ## 5 con 05    1  0.47
    ## 6 con 06    1  2.37

Spaghetti plot
--------------

``` r
data %>%
  mutate(week = as.numeric(week)) %>% 
  ggplot(aes(x = week, y = value, color = id)) +
    geom_line() +
    facet_grid(~arm) + 
    labs(title = "Observations on each subject over time in different groups")
```

<img src="p8015_hw5_tl2882_files/figure-markdown_github/Spaghetti_plot-1.png" width="90%" />

This is the spaghetti plot showing observations on each subject over time.

### Comment

1.  In experimental group, most values tend to grow over time in general; In control group, most values don't have many changes over time in general.

2.  Relatively, most values in experimental group are higher than those in control group.

Problem 2
=========

``` r
data2 = read.csv("https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv")

head(data2)
```

    ##          uid reported_date victim_last victim_first victim_race victim_age
    ## 1 Alb-000001      20100504      GARCIA         JUAN    Hispanic         78
    ## 2 Alb-000002      20100216     MONTOYA      CAMERON    Hispanic         17
    ## 3 Alb-000003      20100601 SATTERFIELD      VIVIANA       White         15
    ## 4 Alb-000004      20100101    MENDIOLA       CARLOS    Hispanic         32
    ## 5 Alb-000005      20100102        MULA       VIVIAN       White         72
    ## 6 Alb-000006      20100126        BOOK    GERALDINE       White         91
    ##   victim_sex        city state      lat       lon           disposition
    ## 1       Male Albuquerque    NM 35.09579 -106.5386 Closed without arrest
    ## 2       Male Albuquerque    NM 35.05681 -106.7153      Closed by arrest
    ## 3     Female Albuquerque    NM 35.08609 -106.6956 Closed without arrest
    ## 4       Male Albuquerque    NM 35.07849 -106.5561      Closed by arrest
    ## 5     Female Albuquerque    NM 35.13036 -106.5810 Closed without arrest
    ## 6     Female Albuquerque    NM 35.15111 -106.5378        Open/No arrest

The dimension of the raw data is `52179, 12` (observations X variables).

Vriable.names are `uid, reported_date, victim_last, victim_first, victim_race, victim_age, victim_sex, city, state, lat, lon, disposition`
